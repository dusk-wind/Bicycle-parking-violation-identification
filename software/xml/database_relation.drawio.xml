<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36" version="27.2.0">
  <diagram name="数据库关系图" id="database_relation_diagram">
    <mxGraphModel dx="1400" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 标题 -->
        <mxCell id="title" value="智慧校园违停检测系统 - 数据库 ER 图" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontStyle=1;fontColor=#2c3e50;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="300" y="40" width="600" height="50" as="geometry" />
        </mxCell>

        <!-- camera表 -->
        <mxCell id="camera_table" value="" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=35;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#3498db;strokeColor=#2980b9;fontSize=14;fontColor=white;fontFamily=Microsoft YaHei;shadow=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="150" y="140" width="350" height="220" as="geometry" />
        </mxCell>
        
        <mxCell id="camera_header" value="CAMERA - 摄像头表" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=16;fontStyle=1;fontColor=white;fontFamily=Microsoft YaHei;" vertex="1" parent="camera_table">
          <mxGeometry y="35" width="350" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="camera_divider" value="" style="line;strokeWidth=2;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#2980b9;" vertex="1" parent="camera_table">
          <mxGeometry y="60" width="350" height="8" as="geometry" />
        </mxCell>
        
        <mxCell id="camera_id" value="id: BIGINT AUTO_INCREMENT PRIMARY KEY" style="text;strokeColor=#f39c12;fillColor=#fff2cc;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontStyle=1;fontFamily=Microsoft YaHei;strokeWidth=2;" vertex="1" parent="camera_table">
          <mxGeometry y="68" width="350" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="camera_serial" value="serial: VARCHAR(100) NOT NULL" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontFamily=Microsoft YaHei;" vertex="1" parent="camera_table">
          <mxGeometry y="98" width="350" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="camera_interface" value="interface_type: VARCHAR(100)" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontFamily=Microsoft YaHei;" vertex="1" parent="camera_table">
          <mxGeometry y="128" width="350" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="camera_connected" value="connected: BOOLEAN DEFAULT TRUE" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontFamily=Microsoft YaHei;" vertex="1" parent="camera_table">
          <mxGeometry y="158" width="350" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="camera_updated" value="last_updated: DATETIME DEFAULT CURRENT_TIMESTAMP" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontFamily=Microsoft YaHei;" vertex="1" parent="camera_table">
          <mxGeometry y="188" width="350" height="32" as="geometry" />
        </mxCell>

        <!-- violation_record表 -->
        <mxCell id="violation_table" value="" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=35;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=0;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#27ae60;strokeColor=#229954;fontSize=14;fontColor=white;fontFamily=Microsoft YaHei;shadow=1;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="650" y="140" width="400" height="250" as="geometry" />
        </mxCell>
        
        <mxCell id="violation_header" value="VIOLATION_RECORD - 违停记录表" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=16;fontStyle=1;fontColor=white;fontFamily=Microsoft YaHei;" vertex="1" parent="violation_table">
          <mxGeometry y="35" width="400" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="violation_divider" value="" style="line;strokeWidth=2;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=#229954;" vertex="1" parent="violation_table">
          <mxGeometry y="60" width="400" height="8" as="geometry" />
        </mxCell>
        
        <mxCell id="violation_id" value="id: BIGINT AUTO_INCREMENT PRIMARY KEY" style="text;strokeColor=#f39c12;fillColor=#fff2cc;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontStyle=1;fontFamily=Microsoft YaHei;strokeWidth=2;" vertex="1" parent="violation_table">
          <mxGeometry y="68" width="400" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="violation_camera_id" value="camera_id: BIGINT NOT NULL (FOREIGN KEY)" style="text;strokeColor=#e74c3c;fillColor=#fadbd8;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontStyle=1;fontFamily=Microsoft YaHei;strokeWidth=2;" vertex="1" parent="violation_table">
          <mxGeometry y="98" width="400" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="violation_image" value="image_path: VARCHAR(255) NOT NULL" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontFamily=Microsoft YaHei;" vertex="1" parent="violation_table">
          <mxGeometry y="128" width="400" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="violation_time" value="upload_time: DATETIME DEFAULT CURRENT_TIMESTAMP" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontFamily=Microsoft YaHei;" vertex="1" parent="violation_table">
          <mxGeometry y="158" width="400" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="violation_confidence" value="confidence: DECIMAL(5,4)" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontFamily=Microsoft YaHei;" vertex="1" parent="violation_table">
          <mxGeometry y="188" width="400" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="violation_location" value="location: VARCHAR(100)" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=left;verticalAlign=middle;spacingLeft=10;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=13;fontFamily=Microsoft YaHei;" vertex="1" parent="violation_table">
          <mxGeometry y="218" width="400" height="32" as="geometry" />
        </mxCell>

        <!-- 关系连接线 -->
        <mxCell id="relation_line" style="edgeStyle=entityRelationEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;strokeColor=#34495e;endArrow=ERoneToMany;startArrow=ERone;startSize=8;endSize=8;" edge="1" parent="1" source="camera_id" target="violation_camera_id">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- 关系说明框 -->
        <mxCell id="relation_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8f9fa;strokeColor=#6c757d;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="450" width="400" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="relation_title" value="表关系说明" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#2c3e50;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="520" y="460" width="160" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="relation_content" value="• 关系类型：一对多关系 (1:N)&lt;br/&gt;• 关系描述：一个摄像头可以产生多条违停记录&lt;br/&gt;• 外键约束：violation_record.camera_id → camera.id&lt;br/&gt;• 删除策略：ON DELETE CASCADE（级联删除）" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#34495e;fontFamily=Microsoft YaHei;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="420" y="490" width="360" height="70" as="geometry" />
        </mxCell>

        <!-- 连接关系说明的虚线 -->
        <mxCell id="relation_pointer" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#95a5a6;dashed=1;dashPattern=8 8;" edge="1" parent="1" source="relation_box" target="relation_line">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="525" y="400" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- 左侧图例 -->
        <mxCell id="legend_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8f9fa;strokeColor=#6c757d;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="450" width="250" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="legend_title" value="字段类型说明" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#2c3e50;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="150" y="460" width="140" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="pk_example" value="PRIMARY KEY" style="text;strokeColor=#f39c12;fillColor=#fff2cc;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=12;fontStyle=1;fontFamily=Microsoft YaHei;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="100" y="495" width="100" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="pk_desc" value="主键字段" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#34495e;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="210" y="495" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="fk_example" value="FOREIGN KEY" style="text;strokeColor=#e74c3c;fillColor=#fadbd8;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=12;fontStyle=1;fontFamily=Microsoft YaHei;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="100" y="525" width="100" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="fk_desc" value="外键字段" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#34495e;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="210" y="525" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="normal_example" value="NORMAL FIELD" style="text;strokeColor=#bdc3c7;fillColor=#ecf0f1;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontSize=12;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="100" y="555" width="100" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="normal_desc" value="普通字段" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#34495e;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="210" y="555" width="80" height="25" as="geometry" />
        </mxCell>

        <!-- 右侧约束说明 -->
        <mxCell id="constraint_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8f9fa;strokeColor=#6c757d;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="870" y="450" width="250" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="constraint_title" value="数据库约束" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#2c3e50;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="945" y="460" width="100" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="constraint_content" value="• AUTO_INCREMENT：主键自动递增&lt;br/&gt;• NOT NULL：非空约束&lt;br/&gt;• DEFAULT：默认值设置&lt;br/&gt;• FOREIGN KEY：外键约束&lt;br/&gt;• ON DELETE CASCADE：级联删除&lt;br/&gt;• VARCHAR(n)：可变长度字符串&lt;br/&gt;• DECIMAL(5,4)：精确小数类型" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#34495e;fontFamily=Microsoft YaHei;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="890" y="490" width="210" height="110" as="geometry" />
        </mxCell>

        <!-- 底部技术说明 -->
        <mxCell id="tech_info" value="数据库管理系统：MySQL 8.0  |  存储引擎：InnoDB  |  字符集：UTF-8 (utf8mb4)  |  排序规则：utf8mb4_unicode_ci" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=2;fontColor=#7f8c8d;fontFamily=Microsoft YaHei;" vertex="1" parent="1">
          <mxGeometry x="200" y="650" width="800" height="40" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile> 